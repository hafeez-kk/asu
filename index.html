<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ARQAMIYYA FEST LIVE RESULT</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@600;800;900&display=swap" rel="stylesheet">

    <style>
        body { background:#050505; color:white; font-family:'Orbitron',sans-serif; }
        .glass { background:rgba(255,255,255,0.05); backdrop-filter:blur(14px); border:1px solid rgba(255,255,255,0.12); }
        .live-dot { width:14px; height:14px; background:red; border-radius:50%; display:inline-block; margin-left:10px; box-shadow: 0 0 10px red; }
        .input-dark { background: rgba(0,0,0,0.4); border: 1px solid rgba(255,255,255,0.2); color: white; border-radius: 4px; padding: 4px; text-align: center; font-size: 12px; }
        #admin-panel { display: none; }
        .champion-card { transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1); }
        .progress-glow { box-shadow: 0 0 15px rgba(79, 70, 229, 0.4); }
    </style>
</head>

<body class="min-h-screen flex flex-col items-center py-8 px-4">

<header class="flex flex-col items-center gap-4 mb-12 text-center">
    <img src="78604a62-cf2e-487b-af34-4454785bfe60.png" class="w-24 cursor-pointer hover:scale-110 transition-transform" onclick="unlockAdmin()">
    <div>
        <h1 class="text-4xl md:text-6xl font-black uppercase tracking-tighter">
            ARQAMIYYA <span class="text-indigo-500">FEST</span>
            <span class="live-dot"></span>
        </h1>
        <p class="text-indigo-300 tracking-[0.5em] text-xs font-bold uppercase mt-2">Overall Live Leaderboard 2025</p>
    </div>
</header>

<div class="w-full max-w-4xl space-y-6 mb-12">
    <div id="overall-body" class="space-y-4">
        </div>
</div>

<div class="w-full max-w-2xl space-y-6">
    <div id="cat-display-container"></div>
</div>

<div id="admin-panel" class="w-full max-w-4xl mt-10 p-8 glass rounded-3xl border-2 border-dashed border-indigo-500/50 mb-20">
    <div class="flex justify-between items-center mb-8 border-b border-white/10 pb-4">
        <h3 class="text-indigo-400 font-black tracking-widest uppercase text-xl">System Management</h3>
        <div class="flex gap-2">
            <button onclick="saveData()" class="bg-green-600 px-4 py-2 rounded-lg font-bold text-[10px] uppercase">Save Changes</button>
            <button onclick="document.getElementById('admin-panel').style.display='none'" class="bg-red-600 px-4 py-2 rounded-lg font-bold text-[10px] uppercase">Close</button>
        </div>
    </div>

    <div class="mb-10">
        <h4 class="text-xs text-indigo-300 mb-4 font-bold tracking-widest uppercase underline">Main Team Scores</h4>
        <div id="admin-main-grid" class="grid grid-cols-1 md:grid-cols-2 gap-4"></div>
    </div>

    <div>
        <h4 class="text-xs text-indigo-300 mb-4 font-bold tracking-widest uppercase underline">Category Rankings</h4>
        <div id="admin-cat-tabs" class="flex gap-2 mb-4 overflow-x-auto pb-2">
             <button onclick="renderAdminCat('subJunior')" class="bg-indigo-600/30 px-4 py-2 rounded text-[10px] font-bold">SUB-JUNIOR</button>
             <button onclick="renderAdminCat('junior')" class="bg-indigo-600/30 px-4 py-2 rounded text-[10px] font-bold">JUNIOR</button>
             <button onclick="renderAdminCat('senior')" class="bg-indigo-600/30 px-4 py-2 rounded text-[10px] font-bold">SENIOR</button>
        </div>
        <div id="admin-cat-editor" class="space-y-2 bg-white/5 p-4 rounded-xl"></div>
    </div>
</div>

<script>
    const TARGET_MAX_POINTS = 500; // Used for the progress bar calculation
    
    let defaultData = {
        overall: [{ name: "ASKARIYYA", points: 148 }, { name: "KUTHAIBA", points: 147 }],
        categories: {
            subJunior: Array(5).fill(0).map((_, i) => ({ name: `PARTICIPANT ${i+1}`, team: "ASK", pts: 25 - (i*2) })),
            junior: Array(5).fill(0).map((_, i) => ({ name: `PARTICIPANT ${i+1}`, team: "KUT", pts: 45 - (i*3) })),
            senior: Array(5).fill(0).map((_, i) => ({ name: `PARTICIPANT ${i+1}`, team: "ASK", pts: 60 - (i*4) }))
        }
    };

    let festData = JSON.parse(localStorage.getItem('festData')) || defaultData;

    function render() {
        // Render Overall (BIG CARDS)
        festData.overall.sort((a,b) => b.points - a.points);
        document.getElementById('overall-body').innerHTML = festData.overall.map((t,i) => {
            const progress = Math.min((t.points / TARGET_MAX_POINTS) * 100, 100);
            const rankColor = i === 0 ? 'text-yellow-400' : 'text-slate-400';
            const bgColor = i === 0 ? 'bg-indigo-600/20' : 'bg-white/5';
            
            return `
                <div class="champion-card glass rounded-[2rem] p-8 border-l-8 ${i === 0 ? 'border-yellow-500' : 'border-indigo-500'} ${bgColor}">
                    <div class="flex flex-col md:flex-row justify-between items-center gap-4">
                        <div class="flex items-center gap-6">
                            <span class="text-5xl md:text-7xl font-black ${rankColor}">0${i+1}</span>
                            <div>
                                <h2 class="text-2xl md:text-4xl font-black tracking-widest uppercase">${t.name}</h2>
                                <p class="text-indigo-400 text-xs font-bold tracking-[0.3em]">CHAMPIONSHIP RACE</p>
                            </div>
                        </div>
                        <div class="text-center md:text-right">
                            <span class="text-5xl md:text-7xl font-black text-white">${t.points}</span>
                            <p class="text-green-400 font-bold text-sm">TOTAL POINTS</p>
                        </div>
                    </div>
                    <div class="w-full bg-white/10 h-4 mt-6 rounded-full overflow-hidden">
                        <div class="h-full bg-gradient-to-r from-indigo-600 to-indigo-400 progress-glow" style="width: ${progress}%"></div>
                    </div>
                </div>
            `;
        }).join('');

        // Categories Column
        const categories = [
            { id: 'subJunior', label: 'SUB-JUNIOR', color: 'text-cyan-400', bg: 'bg-cyan-500/10' },
            { id: 'junior', label: 'JUNIOR', color: 'text-indigo-400', bg: 'bg-indigo-500/10' },
            { id: 'senior', label: 'SENIOR', color: 'text-purple-400', bg: 'bg-purple-500/10' }
        ];

        document.getElementById('cat-display-container').innerHTML = categories.map(cat => {
            const data = festData.categories[cat.id].sort((a,b) => b.pts - a.pts);
            return `
                <div class="glass rounded-2xl overflow-hidden border border-white/10 mb-6">
                    <div class="${cat.bg} p-3 text-center text-xs font-black ${cat.color} border-b border-white/10 tracking-widest">${cat.label} TOP 5</div>
                    <div class="p-2">
                        ${data.map((p, i) => `
                            <div class="flex justify-between items-center p-3 border-b border-white/5 last:border-0">
                                <div class="flex items-center gap-4">
                                    <span class="text-[10px] font-bold text-gray-600">#${i+1}</span>
                                    <div>
                                        <p class="text-xs font-bold uppercase tracking-tight">${p.name}</p>
                                        <p class="text-[9px] text-indigo-400 font-bold uppercase">${p.team}</p>
                                    </div>
                                </div>
                                <div class="text-lg font-black text-yellow-500">${p.pts}</div>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;
        }).join('');

        updateAdminPanels();
    }

    function updateAdminPanels() {
        document.getElementById('admin-main-grid').innerHTML = festData.overall.map((t, i) => `
            <div class="bg-white/5 p-4 rounded-xl flex items-center justify-between">
                <span class="text-xs font-bold uppercase">${t.name}</span>
                <input type="number" value="${t.points}" onchange="festData.overall[${i}].points = parseInt(this.value); render();" class="input-dark w-24 text-xl font-black">
            </div>
        `).join('');
    }

    function renderAdminCat(catId) {
        document.getElementById('admin-cat-editor').innerHTML = `
            ${festData.categories[catId].map((p, i) => `
                <div class="grid grid-cols-4 gap-2 items-center mb-2">
                    <span class="text-[10px] font-bold">RANK ${i+1}</span>
                    <input type="text" value="${p.name}" onchange="festData.categories['${catId}'][${i}].name = this.value; render();" class="input-dark text-left">
                    <input type="text" value="${p.team}" onchange="festData.categories['${catId}'][${i}].team = this.value; render();" class="input-dark uppercase">
                    <input type="number" value="${p.pts}" onchange="festData.categories['${catId}'][${i}].pts = parseInt(this.value); render();" class="input-dark font-black">
                </div>
            `).join('')}
        `;
    }

    function unlockAdmin() {
        if(prompt("Password:") === "96333") {
            document.getElementById('admin-panel').style.display = 'block';
            renderAdminCat('subJunior');
            window.scrollTo({ top: document.body.scrollHeight, behavior: 'smooth' });
        }
    }

    function saveData() {
        localStorage.setItem('festData', JSON.stringify(festData));
        alert("Data Synchronized and Saved!");
    }

    render();
    gsap.to(".live-dot", { opacity: 0.3, repeat: -1, yoyo: true, duration: 0.8 });
</script>
</body>
</html>